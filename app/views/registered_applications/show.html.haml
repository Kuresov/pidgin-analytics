- content_for(:header) do
  = javascript_include_tag 'Chart'

.col-md-3

.col-md-6
  %h1.text-center= @application.name
  %h4.text-center= @application.url
  %div
    %canvas#chart{ width: 470, height: 300 }
  .clearfix
  %table.table
    %thead
      %tr
        %th Event Name
        %th Count
    %tbody
      - @events.each do |key,val|
        %tr
          %td= key
          %td= val.count
  .clearfix
    %div#legend
  .clearfix
    = render partial: 'chartdata.js.erb', locals: {data: @data, sql: @sql}

.col-md-3

:javascript
  var ctx = document.getElementById("chart").getContext("2d");
  var data = {
    labels: #{@days.map { |day| day.to_date.strftime("%A") }},
    datasets: #{ render partial: 'chartdata.js.erb', locals: { data: @data } }
  };

  var newChart = new Chart(ctx).Line(data);
